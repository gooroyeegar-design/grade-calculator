<!DOCTYPE html>
<meta name="google-site-verification" content="7VnCPN-c_Xel-VIxwV3LicJWGOkqx8UpFrS4zFBcDYI" />
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>Ø­Ø§Ø³Ø¨Ø© Ø§Ù„Ù…Ø¹Ø¯Ù„ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
:root {
  --primary: #1565c0;
  --bg: #f8f9fa;
  --card: #ffffff;
  --text: #333;
  --border: #ddd;
  --error: #e63946; /* Sharp red for errors */
}

[data-theme="dark"] {
  --primary: #64b5f6;
  --bg: #121212;
  --card: #1e1e1e;
  --text: #e0e0e0;
  --border: #444;
}

body {
  font-family: "Segoe UI", Tahoma, sans-serif;
  background-color: var(--bg);
  color: var(--text);
  padding: 20px;
  direction: rtl;
  transition: background 0.3s;
}

.container { max-width: 550px; margin: auto; }

.module {
  background: var(--card);
  padding: 15px;
  margin-bottom: 12px;
  border-radius: 12px;
  border: 2px solid transparent;
  box-shadow: 0 2px 8px rgba(0,0,0,0.05);
  transition: 0.2s;
}

/* This triggers when a grade is > 20 */
.error-border {
  border-color: var(--error) !important;
  background-color: rgba(230, 57, 70, 0.05);
}

h3 { margin: 0 0 10px 0; font-size: 1rem; color: var(--primary); }

.input-group { display: flex; gap: 10px; }
input {
  width: 100%; padding: 12px; border-radius: 8px; 
  border: 1px solid var(--border); background: var(--card);
  color: var(--text); font-size: 16px; outline: none;
}

input:focus { border-color: var(--primary); }

button {
  width: 100%; padding: 16px; font-size: 18px;
  background: var(--primary); color: white;
  border: none; border-radius: 12px; cursor: pointer;
  font-weight: bold; margin-top: 15px;
}

#errorToast {
  background: var(--error);
  color: white;
  padding: 12px;
  border-radius: 8px;
  text-align: center;
  margin-bottom: 15px;
  display: none; /* Hidden by default */
  font-weight: bold;
}

.result {
  margin-top: 20px; background: var(--card); padding: 20px;
  border-radius: 15px; text-align: center; display: none;
  border: 2px solid var(--primary);
}

.score { font-size: 3rem; font-weight: 900; margin: 10px 0; }
.pass { color: #2d6a4f; }
.fail { color: var(--error); }

.theme-toggle {
  text-align: left; margin-bottom: 10px;
}
</style>
</head>

<body>

<div class="container">
  <div class="theme-toggle">
    <button style="width:auto; padding:8px 15px; font-size:12px;" onclick="document.documentElement.setAttribute('data-theme', document.documentElement.getAttribute('data-theme') === 'dark' ? 'light' : 'dark')">ğŸŒ“ ÙˆØ¶Ø¹ Ø§Ù„Ù‚Ø±Ø§Ø¡Ø©</button>
  </div>

  <h1>Ø­Ø§Ø³Ø¨Ø© Ø§Ù„Ù…Ø¹Ø¯Ù„ (/20)</h1>

  <div id="errorToast">âš ï¸ Ø®Ø·Ø£: Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø¥Ø¯Ø®Ø§Ù„ Ø¹Ù„Ø§Ù…Ø© Ø£ÙƒØ¨Ø± Ù…Ù† 20!</div>

  <div class="module" id="box1">
    <h3>Ù…Ø¯Ø®Ù„ Ø¥Ù„Ù‰ Ø§Ù„Ø¹Ù„ÙˆÙ… Ø§Ù„Ù‚Ø§Ù†ÙˆÙ†ÙŠØ© (2)</h3>
    <div class="input-group">
      <input type="number" id="m1c" placeholder="Ø§Ù„Ù…Ø­Ø§Ø¶Ø±Ø©" oninput="validate(this)">
      <input type="number" id="m1t" placeholder="TD" oninput="validate(this)">
    </div>
  </div>

  <div class="module" id="box2">
    <h3>Ù‚Ø§Ù†ÙˆÙ† Ø¯Ø³ØªÙˆØ±ÙŠ (2)</h3>
    <div class="input-group">
      <input type="number" id="m2c" placeholder="Ø§Ù„Ù…Ø­Ø§Ø¶Ø±Ø©" oninput="validate(this)">
      <input type="number" id="m2t" placeholder="TD" oninput="validate(this)">
    </div>
  </div>

  <div class="module" id="box3">
    <h3>ØªÙ†Ø¸ÙŠÙ… Ù‚Ø¶Ø§Ø¦ÙŠ (1)</h3>
    <div class="input-group">
      <input type="number" id="m3c" placeholder="Ø§Ù„Ù…Ø­Ø§Ø¶Ø±Ø©" oninput="validate(this)">
      <input type="number" id="m3t" placeholder="TD" oninput="validate(this)">
    </div>
  </div>

  <div class="module"><h3>Ù…Ù†Ù‡Ø¬ÙŠØ© (1)</h3><input type="number" id="m4" oninput="validate(this)"></div>
  <div class="module"><h3>ØªØ§Ø±ÙŠØ® Ø§Ù„Ù†Ø¸Ù… (1)</h3><input type="number" id="m5" oninput="validate(this)"></div>
  <div class="module"><h3>Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ© (1)</h3><input type="number" id="m6" oninput="validate(this)"></div>
  <div class="module"><h3>Ø§Ù„Ù…Ø¬ØªÙ…Ø¹ Ø§Ù„Ø¯ÙˆÙ„ÙŠ (1)</h3><input type="number" id="m7" oninput="validate(this)"></div>

  <button onclick="calculate()">Ø§Ø­Ø³Ø¨ Ø§Ù„Ø¢Ù†</button>
  
  <div class="result" id="resultArea">
    <div id="statusText">Ù…Ø¹Ø¯Ù„Ùƒ Ù‡Ùˆ:</div>
    <div id="finalScore" class="score">0.00</div>
    <div id="msg" style="font-size: 1.2rem;"></div>
  </div>
</div>

<script>
// Real-time validation
function validate(input) {
    const val = parseFloat(input.value);
    const toast = document.getElementById("errorToast");
    
    if (val > 20) {
        input.parentElement.closest('.module').classList.add('error-border');
        toast.style.display = "block";
    } else {
        input.parentElement.closest('.module').classList.remove('error-border');
        // Hide toast only if NO other inputs have errors
        const errors = document.querySelectorAll('.error-border');
        if (errors.length === 0) toast.style.display = "none";
    }
}

function calculate() {
    const inputs = document.querySelectorAll('input[type="number"]');
    let tooHigh = false;

    // Final check before math
    inputs.forEach(i => {
        if (parseFloat(i.value) > 20) tooHigh = true;
    });

    if (tooHigh) {
        alert("ÙŠØ±Ø¬Ù‰ ØªØµØ­ÙŠØ­ Ø§Ù„Ø¹Ù„Ø§Ù…Ø§Øª Ø§Ù„ØªÙŠ ØªØªØ¬Ø§ÙˆØ² 20 Ø£ÙˆÙ„Ø§Ù‹!");
        return;
    }

    // Math Logic
    const getV = (id) => {
        const v = document.getElementById(id).value;
        return v === "" ? 0 : parseFloat(v);
    };
    
    const m1 = (getV("m1c")*0.6 + getV("m1t")*0.4) * 2;
    const m2 = (getV("m2c")*0.6 + getV("m2t")*0.4) * 2;
    const m3 = (getV("m3c")*0.6 + getV("m3t")*0.4) * 1;
    const rest = getV("m4") + getV("m5") + getV("m6") + getV("m7");

    const total = (m1 + m2 + m3 + rest) / 9;
    
    const resArea = document.getElementById("resultArea");
    const scoreDiv = document.getElementById("finalScore");
    
    resArea.style.display = "block";
    scoreDiv.innerText = total.toFixed(2);
    
    if(total >= 10) {
        scoreDiv.className = "score pass";
        document.getElementById("msg").innerHTML = "Ù†Ø§Ø¬Ø­! sa7it yal 5abash ğŸ˜¤ğŸ”¥";
    } else {
        scoreDiv.className = "score fail";
        document.getElementById("msg").innerHTML = "Ù„Ù„Ø£Ø³ÙØŒ Ø§Ù„Ù…Ø¹Ø¯Ù„ Ø£Ù‚Ù„ Ù…Ù† 10 âŒ";
    }

    resArea.scrollIntoView({behavior: "smooth"});
}
</script>
</body>
</html>
